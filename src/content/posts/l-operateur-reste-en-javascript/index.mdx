---
title: L'opÃ©rateur % en javascript
date: 2024-08-16
description: Quelques notes sur l'opÃ©rateur % et ses diffÃ©rences avec le modulo
categories: 
    - code
    - js
---

import Anim from "./_Anim.svelte"

J'ai eu envie d'Ã©crire ce petit article aprÃ¨s la lecture de celui de  [Josh Comeau](https://www.joshwcomeau.com/javascript/modulo-operator/), sur le mÃªme sujet. D'abord parce qu'il est excellent, mais aussi par envie d'y ajouter quelques informations et prÃ©cisions.

## Qu'est-ce qu'un opÃ©rateur ?

En programmation, un opÃ©rateur est un symbole ou une suite de symboles qui indique au compilateur ou Ã  l'interprÃ©teur qu'il doit effectuer une opÃ©ration. Chaque langage a ses propres opÃ©rateurs et mÃªme s'ils ons souvent une syntaxe symilaire, il existe Ã©galement des diffÃ©rences.

Par exemple, dans le cas de javascript :

- l'opÃ©rateur `===` indique Ã  l'interprÃ©teur qu'il doit comparer la valeur de gauche Ã  celle de droite
- l'opÃ©rateur `+` indique Ã  l'interprÃ©teur qu'il doit retourner la somme des deux valeurs.
-  l'opÃ©rateur `??` indique Ã  l'interprÃ©teur qu'il doit retourner la valeur de gauche si elle est diffÃ©rente de `null` ou de `undefined` et la valeur de droite dans le cas contraire.

## L'opÃ©rateur %

Pour ce qui est de l'opÃ©rateur `%`, il retourne le reste de la division de la valeur de gauche par la valeur de droite.

Par exemple:

- `13 % 3` retournera `1`car `13 = 3 x 4 + 1`
- `4 % 1` retournera `0`car `4 = 4 x 1 + 0`
- `-5 % 2` retournera `-1`car `-5 = -2 x 2 + -1`

## Utilisations courantes

### Savoir si un nombre est pair

Pour savoir si un nombre est pair notre opÃ©rateur est bien utile:

```js
const isEven = (n) => n % 2 === 0
```

### RÃ©ussir ses entretiens d'embauche ğŸ˜…

La lÃ©gende veut que dans les entretiens techniques, on pose souvent le problÃ¨me suivant :

Ã‰crivez une fonction qui, pour chaque nombre entier passÃ© en entrÃ©e, retourne :

- "Fizz" si le nombre est divisible par 3.
- "Buzz" si le nombre est divisible par 5.
- "FizzBuzz" si le nombre est divisible par 3 et par 5.
- Le nombre sous forme de chaÃ®ne de caractÃ¨res, dans les autres cas.

```js
const fizzBuzz = (n) => {
  let result = ""
  if (n % 3 === 0) result += "Fizz"
  if (n % 5 === 0) result += "Buzz"
  return result || n.toString()
}
```

## Boucler sur un tableau

Mettons qu'on veuille jouer une animation, Ã  l'aide de javascript. Cette animation sera composÃ©e des emojis suivants: ğŸ•›ğŸ•ğŸ•‘ğŸ•’ğŸ•“ğŸ•”ğŸ••ğŸ•–ğŸ•—ğŸ•˜ğŸ•™ğŸ•šğŸ•›

Un bouton `+` nous permettra de passer Ã  la sprite suivante, et lorsqu'on passera la derniÃ¨re sprite on reviendra Ã  la premiÃ¨re.

Le code pourrait ressembler Ã  quelque chose comme ceci :

```js
const SPRITES = ['ğŸ•›','ğŸ•','ğŸ•‘','ğŸ•’','ğŸ•“','ğŸ•”','ğŸ••','ğŸ•–','ğŸ•—','ğŸ•˜','ğŸ•™','ğŸ•š']
let current = 0

function update(){
    current = (current + 1) % SPRITES.length
    showSprite(SPRITES[current])
}
```

<Anim client:only/>

## Le piÃ¨ge de l'opÃ©rateur %

On se rend compte des limites de cet opÃ©rateur lorsqu'on s'imagine ajouter un bouton `-`. En effet, on voudrait que notre belle animation boucle dans les deux sens. Or en javascript `-1 % 12`, retourne `-1` et non pas `11` comme on le voudrait.\
Si on jette une Å“il Ã  [la documentation MDN](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/Remainder), on se rend compte que c'est le rÃ©sultat qu'on obtient avec un opÃ©rateur `modulo` et non pas `reste`, malheureusement cet opÃ©rateur n'existe pas en javascript.

<Aside>
Dans certains autres langages, comme Python ou Ruby, l'opÃ©rateur % se comporte comme un opÃ©rateur modulo, qui garantit toujours un rÃ©sultat positif, mÃªme avec des nombres nÃ©gatifs. Cette diffÃ©rence peut entraÃ®ner des comportements inattendus lorsque vous portez du code d'un langage Ã  un autre ou lorsque vous dÃ©veloppez des algorithmes oÃ¹ le signe du rÃ©sultat est important.
</Aside>

Pour y remÃ©dier on peut exploiter la petite formule fournie par la MDN:

> Pour obtenir une opÃ©ration Ã©quivalente au modulo en JavaScript, on pourra utiliser `((a % n ) + n ) % n`.

```js
function modulo(value, mod){
    return ((value % mod ) + mod ) % mod
}
```

Et on obtient enfin une horloge qui tourne dans les deux sens!

<Anim lessBtn client:only/>